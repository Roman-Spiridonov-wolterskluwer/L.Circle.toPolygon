L.Circle.SECTIONS_COUNT=64;L.Circle.prototype.toPolygon=function(t){if(!this._map){throw Error("Can't figure out points without adding the feature to the map")}var i=[],o=this._map.options.crs,n=Math.PI*2,r=0,a,e,p,s,h;if(o===L.CRS.EPSG3857){s=this._map.latLngToLayerPoint.bind(this._map);h=this._map.layerPointToLatLng.bind(this._map);e=this._radius}else{s=o.projection.project.bind(o.projection);h=o.projection.unproject.bind(o.projection);e=this._mRadius}a=s(this._latlng);t=t||L.Circle.SECTIONS_COUNT;for(var c=0;c<t;c++){r+=n/t;p=new L.Point(a.x+e*Math.cos(r),a.y+e*Math.sin(r));i.push(h(p))}return i};